<UserControl x:Class="LearningTrainer.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:behaviors="clr-namespace:LearningTrainer.Behaviors"
             xmlns:local="clr-namespace:LearningTrainer.Views"
             xmlns:svg="http://sharpvectors.codeplex.com/svgc/"
             xmlns:converters="clr-namespace:LearningTrainer.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000"
             Background="{DynamicResource MainBackgroundBrush}" Cursor="">

    <UserControl.Resources>
        <converters:BoolToThicknessConverter x:Key="BoolToThicknessConverter"/>
        <converters:StringMatchToBooleanConverter x:Key="StringMatchToBooleanConverter"/>
        <converters:StringNullOrEmptyToVisibilityConverter x:Key="StringNullOrEmptyToVisibilityConverter"/>
        <!-- СТИЛЬ ДЛЯ КНОПОК САЙДБАРА -->
        <Style x:Key="SidebarButtonStyle" TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <StackPanel Orientation="Horizontal">

                                <Rectangle Width="20" Height="20" 
                                    Margin="0,0,12,0"
                                    VerticalAlignment="Center"
                                    Fill="{TemplateBinding Foreground}">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Uniform">
                                            <VisualBrush.Visual>
                                                <svg:SvgViewbox Source="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}"/>
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Rectangle.OpacityMask>
                                </Rectangle>

                                <ContentPresenter VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <!-- Наведение -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E5E7EB"/>
                    <Setter Property="Foreground" Value="#111827"/>
                </Trigger>
                <!-- Выбрано -->
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background" Value="#DBEAFE"/>
                    <!-- Светло-синий -->
                    <Setter Property="Foreground" Value="#2563EB"/>
                    <!-- Синий -->
                    <Setter Property="FontWeight" Value="Bold"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource InputBackgroundBrush}"/>
                    <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource PrimaryAccentBrush}"/>
                    <Setter Property="Foreground" Value="{DynamicResource AccentForegroundBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ToggleSwitchStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid Background="Transparent" Cursor="Hand">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ContentPresenter Grid.Column="0" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <Border Grid.Column="1" x:Name="SwitchTrack" Width="44" Height="24" CornerRadius="12" Background="#E5E7EB" BorderThickness="1" BorderBrush="#D1D5DB">
                                <Ellipse x:Name="SwitchKnob" Width="18" Height="18" Fill="White" HorizontalAlignment="Left" Margin="2,0"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="SwitchTrack" Property="Background" Value="#3B82F6"/>
                                <Setter TargetName="SwitchTrack" Property="BorderBrush" Value="#3B82F6"/>
                                <Setter TargetName="SwitchKnob" Property="HorizontalAlignment" Value="Right"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ComboBoxItemContainerStyle" TargetType="ComboBoxItem">
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border x:Name="bd" 
                        Background="{TemplateBinding Background}"
                        BorderThickness="0" 
                        Padding="{TemplateBinding Padding}"
                        SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{DynamicResource BorderBrush}"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{DynamicResource PrimaryAccentBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ComboBoxToggleButtonStyle" TargetType="ToggleButton">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="ClickMode" Value="Press"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="templateRoot"
                        Background="{DynamicResource InputBackgroundBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="6">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="30"/>
                                </Grid.ColumnDefinitions>

                                <Path x:Name="arrow" Grid.Column="1" 
                              Data="M0,0 L4,4 L8,0" 
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"
                              Fill="{DynamicResource SecondaryTextBrush}"
                              StrokeThickness="0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="templateRoot" Property="BorderBrush" Value="{DynamicResource TertiaryTextBrush}"/>
                                <Setter TargetName="arrow" Property="Fill" Value="{DynamicResource PrimaryTextBrush}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="templateRoot" Property="BorderBrush" Value="{DynamicResource PrimaryAccentBrush}"/>
                                <Setter TargetName="arrow" Property="Fill" Value="{DynamicResource PrimaryAccentBrush}"/>
                                <Setter TargetName="arrow" Property="Data" Value="M0,4 L4,0 L8,4"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
            <Setter Property="Background" Value="{DynamicResource InputBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="{DynamicResource BaseFontSize}"/>
            <Setter Property="ItemContainerStyle" Value="{StaticResource ComboBoxItemContainerStyle}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid x:Name="templateRoot" SnapsToDevicePixels="True">

                            <Popup x:Name="PART_Popup" 
                           AllowsTransparency="True" 
                           Grid.ColumnSpan="2" 
                           IsOpen="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                           Margin="1" 
                           PopupAnimation="Slide" 
                           Placement="Bottom">

                                <Border x:Name="dropDownBorder" 
                                Background="{DynamicResource CardBackgroundBrush}" 
                                BorderBrush="{DynamicResource BorderBrush}" 
                                BorderThickness="1" 
                                CornerRadius="6"
                                MinWidth="{Binding ActualWidth, ElementName=templateRoot}" 
                                MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" Opacity="0.1" BlurRadius="10" ShadowDepth="3"/>
                                    </Border.Effect>

                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid x:Name="grid" RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas x:Name="canvas" HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="opaqueRect" Fill="{Binding Background, ElementName=dropDownBorder}" Height="{Binding ActualHeight, ElementName=dropDownBorder}" Width="{Binding ActualWidth, ElementName=dropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Popup>

                            <ToggleButton x:Name="toggleButton" 
                                  Style="{StaticResource ComboBoxToggleButtonStyle}" 
                                  IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                  ClickMode="Press"
                                          Padding="10,10"/>

                            <ContentPresenter x:Name="contentPresenter"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" 
                                              Content="{TemplateBinding SelectionBoxItem}" 
                                              ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" 
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                              IsHitTestVisible="False" 
                                              Margin="{TemplateBinding Padding}" 
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <!-- Сайдбар -->
            <ColumnDefinition Width="*"/>
            <!-- Контент -->
        </Grid.ColumnDefinitions>

        <!-- САЙДБАР -->
        <StackPanel Grid.Column="0" Margin="0,20,20,0">


            <RadioButton Content="{DynamicResource Loc.Settings.GeneralRadio}" Tag="Sources/general.svg"
                         Style="{StaticResource SidebarButtonStyle}" 
                         Command="{Binding SwitchSectionCommand}" CommandParameter="General"
                         IsChecked="{Binding CurrentSection, Converter={StaticResource StringMatchToBooleanConverter}, ConverterParameter=General, Mode=TwoWay}"/>

            <RadioButton Content="{DynamicResource Loc.Settings.AccountRadio}" Tag="Sources/account.svg"
                         Style="{StaticResource SidebarButtonStyle}" 
                         Command="{Binding SwitchSectionCommand}" CommandParameter="Account"
                         IsChecked="{Binding CurrentSection, Converter={StaticResource StringMatchToBooleanConverter}, ConverterParameter=Account, Mode=TwoWay}"/>

            <RadioButton Content="{DynamicResource Loc.Settings.AppearanceRadio}" Tag="Sources/appearance.svg"
                         Style="{StaticResource SidebarButtonStyle}" 
                         Command="{Binding SwitchSectionCommand}" CommandParameter="Appearance"
                         IsChecked="{Binding CurrentSection, Converter={StaticResource StringMatchToBooleanConverter}, ConverterParameter=Appearance, Mode=TwoWay}"/>
        </StackPanel>

        <!-- КОНТЕНТ -->
        <Border Grid.Column="1" Background="{DynamicResource SecondaryMainBackgroundBrush}" CornerRadius="12" Padding="40">
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.05" BlurRadius="10" ShadowDepth="2"/>
            </Border.Effect>

            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <Grid>
                    <StackPanel x:Name="GeneralSection">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentSection}" Value="General">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="{DynamicResource Loc.SettingsGen.TitleLabel}" 
                                   FontSize="{DynamicResource BiggerHeaderFontSize}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}" 
                                   FontWeight="Bold" 
                                   Margin="0,0,0,20"/>

                        <TextBlock Text="{DynamicResource Loc.SettingsGen.DailyGoalLabel}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}" 
                                   FontWeight="SemiBold" 
                                   Margin="0,0,0,10"/>
                        <Border Style="{StaticResource InputContainerStyle}">
                            <StackPanel Margin="5">
                                <Grid>
                                    <TextBlock Text="{DynamicResource Loc.SettingsGen.NewWordsPerDayLabel}" Foreground="{DynamicResource SecondaryTextBrush}"/>
                                    <TextBlock Text="{Binding ElementName=GoalSlider, Path=Value}" HorizontalAlignment="Right" FontWeight="Bold" Foreground="#3B82F6"/>
                                </Grid>
                                <Slider x:Name="GoalSlider" Minimum="5" Maximum="50" Value="{Binding DailyGoal}" 
                                        TickFrequency="5" IsSnapToTickEnabled="True" Margin="0,10,0,0"/>
                            </StackPanel>
                        </Border>


                        <TextBlock Text="{DynamicResource Loc.SettingsGen.LanguageLabel}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}" 
                                   FontSize="{DynamicResource BaseFontSize}"
                                   FontWeight="SemiBold" 
                                   Margin="0,20,0,10"/>

                        <ComboBox Grid.Column="1"
                            ItemsSource="{Binding AvailableLanguages}"
                            FontSize="{DynamicResource BaseFontSize}"
                            SelectedItem="{Binding CurrentLanguage}"    
                            MinHeight="45"
                            Background="{DynamicResource CardPartBackgroundBrush}"
                            BorderThickness="0"
                            VerticalContentAlignment="Center"
                            Padding="15,0">
                        </ComboBox>

                    </StackPanel>


                    <StackPanel x:Name="AccountSection">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentSection}" Value="Account">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="{DynamicResource Loc.SettingsAcc.TitleLabel}" 
                                   FontSize="{DynamicResource BiggerHeaderFontSize}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                   FontWeight="Bold" 
                                   Margin="0,0,0,20"/>

                        <TextBlock Text="{DynamicResource Loc.SettingsAcc.ChangePasswordLabel}" 
                                   FontSize="{DynamicResource HeaderFontSize}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                   FontWeight="SemiBold" 
                                   Margin="0,0,0,20"/>

                        <TextBlock Text="{DynamicResource Loc.SettingsAcc.OldPasswordLabel}" 
                                   Foreground="{DynamicResource SecondaryTextBrush}" 
                                   FontSize="{DynamicResource BaseFontSize}" 
                                   Margin="0,0,0,4"/>
                        <Border Style="{StaticResource InputContainerStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Rectangle
                                    Fill="{DynamicResource PrimaryTextBrush}"
                                    Height="16" Width="16"
                                    Stretch="Uniform" 
                                    Margin="0,0,10,0" 
                                    VerticalAlignment="Center">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Uniform">
                                            <VisualBrush.Visual>
                                                <svg:SvgViewbox Source="Sources/password.svg"/>
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <PasswordBox Grid.Column="1" 
                                             x:Name="OldPasswordBox" 
                                             Background="Transparent"
                                             Foreground="{DynamicResource PrimaryTextBrush}"
                                             BorderThickness="0"
                                             behaviors:PasswordBoxBehavior.Attach="True"
                                             behaviors:PasswordBoxBehavior.Password="{Binding OldPassword, Mode=TwoWay}"/>
                            </Grid>
                        </Border>

                        <TextBlock Text="{DynamicResource Loc.SettingsAcc.NewPasswordLabel}" 
                                   Foreground="{DynamicResource SecondaryTextBrush}" 
                                   FontSize="{DynamicResource BaseFontSize}" 
                                   Margin="0,0,0,4"/>
                        
                        <Border Style="{StaticResource InputContainerStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Rectangle
                                    Fill="{DynamicResource PrimaryTextBrush}"
                                    Height="16" Width="16"
                                    Stretch="Uniform" 
                                    Margin="0,0,10,0" 
                                    VerticalAlignment="Center">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Uniform">
                                            <VisualBrush.Visual>
                                                <svg:SvgViewbox Source="Sources/password.svg"/>
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <PasswordBox Grid.Column="1" 
                                             x:Name="NewPasswordBox" 
                                             Foreground="{DynamicResource PrimaryTextBrush}"
                                             Background="Transparent" 
                                             BorderThickness="0"
                                             behaviors:PasswordBoxBehavior.Attach="True"
                                             behaviors:PasswordBoxBehavior.Password="{Binding NewPassword, Mode=TwoWay}"/>
                            </Grid>
                        </Border>

                        <Button Content="{DynamicResource Loc.Button.SaveButton}" 
                                Command="{Binding ChangePasswordCommand}" 
                                Style="{StaticResource SuccessButton}"            
                                Width="160" Height="40" 
                                HorizontalAlignment="Left"
                                behaviors:PasswordBoxBehavior.Password="{Binding NewPassword, Mode=TwoWay}"/>
                        <TextBlock Text="{Binding ChangePasswordMessage}" 
           Margin="0,10,0,0"
           HorizontalAlignment="Left"
           TextWrapping="Wrap"
           FontSize="14"
           FontWeight="Medium"
           Visibility="{Binding ChangePasswordMessage, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}, ConverterParameter=invert}">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="#10B981"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsError}" Value="True">
                                            <Setter Property="Foreground" Value="#EF4444"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Border BorderBrush="{DynamicResource SeparatorBrush}" BorderThickness="0,0,0,1" Margin="0,30,0,30"/>
                        
                        <StackPanel>
                            <TextBlock Text="{DynamicResource Loc.SettingsAcc.TeacherTitleLabel}" 
                                       FontSize="{DynamicResource BiggerHeaderFontSize}"
                                       Foreground="{DynamicResource PrimaryTextBrush}"
                                       FontWeight="SemiBold" 
                                       Margin="0,0,0,20"/>
                            <TextBlock Text="{DynamicResource Loc.SettingsAcc.GenerateCodeLabel}" 
                                       Foreground="{DynamicResource PrimaryTextBrush}" 
                                       FontSize="{DynamicResource BaseFontSize}" 
                                       Margin="0,0,0,4"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0" 
            Content="{DynamicResource Loc.SettingsAcc.BecomeTeacherLabel}"
            Command="{Binding UpgradeToTeacherCommand}"
            Style="{StaticResource PrimaryButton}"
            Width="180" Height="40" 
            HorizontalAlignment="Left"
            Visibility="{Binding TeacherCode, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}"/>

                                <StackPanel Grid.Column="0" Orientation="Horizontal"
                Visibility="{Binding TeacherCode, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}, ConverterParameter=invert}">

                                    <Border Background="{DynamicResource InputBackgroundBrush}" 
                BorderBrush="{DynamicResource PrimaryAccentBrush}" 
                BorderThickness="1" 
                CornerRadius="6"
                Padding="15,8"
                Margin="0,0,10,0">
                                        <TextBox Text="{Binding TeacherCode, Mode=OneWay}"
                     IsReadOnly="True"
                     FontSize="{DynamicResource HeaderFontSize}"
                     FontWeight="Bold"
                     Foreground="{DynamicResource PrimaryTextBrush}"
                     Background="Transparent"
                     BorderThickness="0"
                     VerticalAlignment="Center"
                     MinWidth="120"
                     TextAlignment="Center"/>
                                    </Border>

                                    <Button Command="{Binding CopyTeacherCodeCommand}"
                                        Style="{StaticResource BaseButton}"
                                        ToolTip="Copy Code"
                                        Cursor="Hand"
                                        Padding="10,0"
                                        MinWidth="70"
                                        Height="40">
                                        <StackPanel Orientation="Horizontal">
                                            <Rectangle Width="16" Height="16" Fill="{DynamicResource PrimaryTextBrush}" Margin="0,0,5,0">
                                                <Rectangle.OpacityMask>
                                                    <VisualBrush Stretch="Uniform">
                                                        <VisualBrush.Visual>
                                                            <Path Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Fill="Black" />
                                                        </VisualBrush.Visual>
                                                    </VisualBrush>
                                                </Rectangle.OpacityMask>
                                            </Rectangle>
                                            <TextBlock Text="Copy" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Grid>

                            <TextBlock Text="{DynamicResource Loc.SettingsAcc.HelpCodeLabel}"               
                                       FontSize="{DynamicResource BaseFontSize}" 
                                       Foreground="{DynamicResource TertiaryTextBrush}" 
                                       Margin="0,5,0,0"/>
                            
                        </StackPanel>
                        
                        <Border BorderBrush="#E5E7EB" 
                                BorderThickness="0,0,0,1" 
                                Margin="0,30,0,30"/>

                        <Button Content="{DynamicResource Loc.Button.LogoutButton}" 
                                Command="{Binding LogoutCommand}" 
                                Style="{StaticResource DangerButton}" 
                                Width="120" 
                                MinHeight="30"
                                HorizontalAlignment="Left"/>
                    </StackPanel>


                    <StackPanel x:Name="AppearanceSection">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentSection}" Value="Appearance">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="{DynamicResource Loc.SettingsApp.TitleLabel}" 
                                   FontSize="{DynamicResource BiggerHeaderFontSize}" 
                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                   FontWeight="Bold" 
                                   Margin="0,0,0,20"/>

                        <TextBlock Text="{DynamicResource Loc.SettingsApp.ChooseThemeLabel}" 
                                   FontWeight="SemiBold"
                                   FontSize="{DynamicResource BaseFontSize}"
                                   Margin="0,0,0,10" 
                                   Foreground="{DynamicResource PrimaryTextBrush}"/>

                        <ComboBox ItemsSource="{Binding AvailableThemes}"
                                  SelectedItem="{Binding SelectedTheme}"
                                  Foreground="{DynamicResource PrimaryTextBrush}"
                                  Width="200"
                                  HorizontalAlignment="Left"/>

                        <TextBlock Text="{DynamicResource Loc.SettingsApp.ReadabiltyLabel}" 
                                   FontSize="12" 
                                   Foreground="{DynamicResource SecondaryTextBrush}" 
                                   Margin="0,10,0,0"/>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>